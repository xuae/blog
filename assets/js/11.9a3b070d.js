(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{492:function(e,t,a){"use strict";a.r(t);var s=a(4),r=Object(s.a)({},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h2",{attrs:{id:"基本命令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#基本命令"}},[e._v("#")]),e._v(" 基本命令")]),e._v(" "),a("h3",{attrs:{id:"提交日志"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#提交日志"}},[e._v("#")]),e._v(" 提交日志")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("git log // 查看全部提交日志，按 `q` 键退出\ngit log –pretty=oneline // 每一次提交日志只显示一行信息\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br")])]),a("h3",{attrs:{id:"远程仓库"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#远程仓库"}},[e._v("#")]),e._v(" 远程仓库")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("git remote // 查看远程仓库的信息\ngit remote -v // 查看远程仓库的详细信息\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br")])]),a("h3",{attrs:{id:"标签"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#标签"}},[e._v("#")]),e._v(" 标签")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('git tag // 显示所有标签\ngit tag -l "v3.3.*" // 显示过滤后的标签\ngit tag [name] // 新建标签\ngit tag -a [name] [commit_id] // 在指定的某个 commit 上添加标签\ngit tag -a [name] [commit_id] -m "备注信息" // -m 添加备注信息\ngit show [name] // 显示标签的详细信息 \ngit push origin [name] // 向远程分支提交单个标签\ngit push origin --tags // 推送所有标签\ngit tag -d [name] // 删除某个标签\ngit push origin :refs/tags/<name> // 远程删除标签\n')])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br"),a("span",{staticClass:"line-number"},[e._v("6")]),a("br"),a("span",{staticClass:"line-number"},[e._v("7")]),a("br"),a("span",{staticClass:"line-number"},[e._v("8")]),a("br"),a("span",{staticClass:"line-number"},[e._v("9")]),a("br"),a("span",{staticClass:"line-number"},[e._v("10")]),a("br")])]),a("h3",{attrs:{id:"推送"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#推送"}},[e._v("#")]),e._v(" 推送")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("git push origin HEAD --force // 强制推送，慎用\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("h3",{attrs:{id:"账号信息（用户名，邮箱）"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#账号信息（用户名，邮箱）"}},[e._v("#")]),e._v(" 账号信息（用户名，邮箱）")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("git config user.name // 查看当前登录的用户名\ngit config user.email // 查看当前登录的邮箱\n\ngit config user.name 'Your_User_Name' // 修改当前用户名\ngit config user.email 'Your_Email' // 修改当前邮箱\n\ngit config --global user.name 'Your_User_Name' // 修改全局用户名\ngit config --global user.email 'Your_Email' // 修改全局邮箱\n\ngit config --global --unset user.name // 删除全局配置的用户名\ngit config --global --unset user.email // 删除全局配置的邮箱\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br"),a("span",{staticClass:"line-number"},[e._v("6")]),a("br"),a("span",{staticClass:"line-number"},[e._v("7")]),a("br"),a("span",{staticClass:"line-number"},[e._v("8")]),a("br"),a("span",{staticClass:"line-number"},[e._v("9")]),a("br"),a("span",{staticClass:"line-number"},[e._v("10")]),a("br"),a("span",{staticClass:"line-number"},[e._v("11")]),a("br")])]),a("h2",{attrs:{id:"如何彻底删除已提交的-commit"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#如何彻底删除已提交的-commit"}},[e._v("#")]),e._v(" 如何彻底删除已提交的 commit")]),e._v(" "),a("div",{staticClass:"custom-block danger"},[a("p",[e._v("此操作谨慎使用，千万不要随便使用")]),e._v(" "),a("p",[e._v("必须看懂之后才能操作，或者可以新建一个分支，测试一下效果")]),e._v(" "),a("p",[e._v("如果误操作删除了不该删除的，我也不知道怎么办，找回方法还没试过，以后再研究")])]),e._v(" "),a("ol",[a("li",[a("p",[e._v("git reset --hard commit_id (可用 "),a("code",[e._v("git log –oneline")]),e._v(" 查看)")]),e._v(" "),a("p",[e._v("注意 git reset 的三种模式，--hard会删除commit_id之后提交的记录和工作区域")])]),e._v(" "),a("li",[a("p",[e._v("git push origin HEAD --force 强制推送")]),e._v(" "),a("p",[e._v("强推可能会导致其他用户提交的commit丢失")])])]),e._v(" "),a("h2",{attrs:{id:"如何修改已提交-commit-的用户信息"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#如何修改已提交-commit-的用户信息"}},[e._v("#")]),e._v(" 如何修改已提交 commit 的用户信息")]),e._v(" "),a("div",{staticClass:"custom-block danger"},[a("p",[e._v("警告：此操作会破坏历史记录。")]),e._v(" "),a("p",[e._v("如果正在与其他人在存储库上进行协作，则重写已发布的历史记录被认为是不好的做法。")]),e._v(" "),a("p",[e._v("只应在紧急情况下这样做。")])]),e._v(" "),a("ol",[a("li",[a("p",[e._v("Git Bash 复制并粘贴脚本，根据需要替换以下变量：")]),e._v(" "),a("ul",[a("li",[e._v("OLD_EMAIL: 旧的邮箱地址")]),e._v(" "),a("li",[e._v("CORRECT_NAME: 新的用户名")]),e._v(" "),a("li",[e._v("CORRECT_EMAIL: 新的邮箱地址")])]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('#!/bin/sh\n\ngit filter-branch --env-filter \'\n\nOLD_EMAIL="your-old-email@example.com"\nCORRECT_NAME="Your Correct Name"\nCORRECT_EMAIL="your-correct-email@example.com"\n\nif [ "$GIT_COMMITTER_EMAIL" = "$OLD_EMAIL" ]\nthen\nexport GIT_COMMITTER_NAME="$CORRECT_NAME"\nexport GIT_COMMITTER_EMAIL="$CORRECT_EMAIL"\nfi\nif [ "$GIT_AUTHOR_EMAIL" = "$OLD_EMAIL" ]\nthen\nexport GIT_AUTHOR_NAME="$CORRECT_NAME"\nexport GIT_AUTHOR_EMAIL="$CORRECT_EMAIL"\nfi\n\' --tag-name-filter cat -- --branches --tags\n')])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br"),a("span",{staticClass:"line-number"},[e._v("6")]),a("br"),a("span",{staticClass:"line-number"},[e._v("7")]),a("br"),a("span",{staticClass:"line-number"},[e._v("8")]),a("br"),a("span",{staticClass:"line-number"},[e._v("9")]),a("br"),a("span",{staticClass:"line-number"},[e._v("10")]),a("br"),a("span",{staticClass:"line-number"},[e._v("11")]),a("br"),a("span",{staticClass:"line-number"},[e._v("12")]),a("br"),a("span",{staticClass:"line-number"},[e._v("13")]),a("br"),a("span",{staticClass:"line-number"},[e._v("14")]),a("br"),a("span",{staticClass:"line-number"},[e._v("15")]),a("br"),a("span",{staticClass:"line-number"},[e._v("16")]),a("br"),a("span",{staticClass:"line-number"},[e._v("17")]),a("br"),a("span",{staticClass:"line-number"},[e._v("18")]),a("br"),a("span",{staticClass:"line-number"},[e._v("19")]),a("br")])])]),e._v(" "),a("li",[a("p",[e._v("按Enter键运行脚本。")])]),e._v(" "),a("li",[a("p",[e._v("查看新的Git历史记录是否有错误。")])]),e._v(" "),a("li",[a("p",[e._v("将更正的历史记录推送到GitHub：")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("git push --force --tags origin 'refs/heads/*'\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])])])]),e._v(" "),a("h2",{attrs:{id:"分支"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#分支"}},[e._v("#")]),e._v(" 分支")]),e._v(" "),a("h3",{attrs:{id:"命名规范"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#命名规范"}},[e._v("#")]),e._v(" 命名规范")]),e._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",[e._v("几乎所有的版本控制系统都以某种形式支持分支。 使用分支意味着你可以把你的工作从开发主线上分离开来，以免影响开发主线。有人把 Git 的分支模型称为它的“必杀技特性”，因为基于指针的实现使其足够轻量。")]),e._v(" "),a("p",[e._v("Git 鼓励在工作流程中频繁地使用分支与合并，哪怕一天之内进行许多次，但仍要遵循一定的规范。")])]),e._v(" "),a("p",[e._v("当有一组 feature 开发完成，首先会合并到 develop 分支，进入提测时，会创建 release 分支。")]),e._v(" "),a("p",[e._v("如果测试过程中存在 bug 需要修复，则直接由开发者在 release 分支修复并提交。")]),e._v(" "),a("p",[e._v("当测试完成之后，合并 release 分支到 master 和 develop 分支，此时 master 为最新代码，用作上线。")]),e._v(" "),a("p",[e._v("以下规范不一定是必须的，一般是根据实际情况来的，总结下自己工作中的一些问题")]),e._v(" "),a("ul",[a("li",[e._v("自己的分支一定要自测，切记不要提交后，影响到其他代码，更别说别人拉下代码还报错这种低级错误")]),e._v(" "),a("li",[e._v("本地分支要做到勤提交，分小功能提交，一次提交一大堆各种功能的做法也要杜绝")]),e._v(" "),a("li",[e._v("每天第一件事就是更新 develop 分支内容到本地分支，避免大规模 merge，太容易出错了")]),e._v(" "),a("li",[e._v("迭代新版本时，一定要保证当前开发分支和线上分支一样")])]),e._v(" "),a("h4",{attrs:{id:"master"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#master"}},[e._v("#")]),e._v(" master")]),e._v(" "),a("ul",[a("li",[e._v("master 为主分支，也是用于部署生产环境的分支，master 分支要确保稳定性")]),e._v(" "),a("li",[e._v("master 分支一般由 develop 以及 hotfix 分支合并，任何时间都不能直接修改代码")])]),e._v(" "),a("h4",{attrs:{id:"develop"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#develop"}},[e._v("#")]),e._v(" develop")]),e._v(" "),a("ul",[a("li",[e._v("develop 为开发分支，始终保持最新完成以及bug修复后的代码")]),e._v(" "),a("li",[e._v("一般开发新功能时，feature 分支都是基于 develop 分支下创建的")])]),e._v(" "),a("h4",{attrs:{id:"feature"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#feature"}},[e._v("#")]),e._v(" feature")]),e._v(" "),a("ul",[a("li",[e._v("开发新功能时，以 develop 分支为基础创建 feature 分支")]),e._v(" "),a("li",[e._v("分支命名: feature/ 开头的为特性分支， 命名规则: feature/user_module、 feature/cart_module")])]),e._v(" "),a("h4",{attrs:{id:"release"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#release"}},[e._v("#")]),e._v(" release")]),e._v(" "),a("ul",[a("li",[e._v("release 为预上线分支，发布提测阶段，以 release 分支代码为基准提测")])]),e._v(" "),a("h4",{attrs:{id:"hotfix"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#hotfix"}},[e._v("#")]),e._v(" hotfix")]),e._v(" "),a("ul",[a("li",[e._v("分支命名: hotfix/ 开头的为修复分支，它的命名规则与 feature 分支类似")]),e._v(" "),a("li",[e._v("线上出现紧急问题时，需要及时修复，以 master 分支为基线，创建 hotfix 分支，修复完成后，需要合并到 master 分支和 develop 分支")])]),e._v(" "),a("h3",{attrs:{id:"分支合并"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#分支合并"}},[e._v("#")]),e._v(" 分支合并")]),e._v(" "),a("div",{staticClass:"custom-block warning"},[a("p",[e._v("git merge --squash [branch] 会变更提交者作者信息，追溯困难，解决方法是由 branch 分支作者来合并到当前分支")]),e._v(" "),a("p",[e._v("若要合并分支时需要合并commit，建议选用 rebase merge")])]),e._v(" "),a("h4",{attrs:{id:"_1-git-merge-branch"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-git-merge-branch"}},[e._v("#")]),e._v(" 1. git merge [branch]")]),e._v(" "),a("p",[e._v("将 branch 分支的 commit 全部合并到当前分支")]),e._v(" "),a("h4",{attrs:{id:"_2-git-merge-squash-branch"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-git-merge-squash-branch"}},[e._v("#")]),e._v(" 2. git merge --squash [branch]")]),e._v(" "),a("p",[e._v("将 branch 分支上的所有 commit 合并到一个 commit 上，然后提交到主干。")]),e._v(" "),a("h4",{attrs:{id:"_3-rebase-merge"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-rebase-merge"}},[e._v("#")]),e._v(" 3. rebase merge")]),e._v(" "),a("div",{staticClass:"custom-block warning"},[a("p",[e._v("注意：在执行rebase的时候可能会出现冲突的问题，此时需要手工解决冲突的问题，然后执行(git add)命令；所有冲突解决完之后，这时不需要执行(git commit)命令，而是运行(git rebase --continue)命令，一直到rebase完成；如果中途想放弃rebase操作，可以运行(git rebase --abort)命令回到rebase之前的状态。")])]),e._v(" "),a("p",[e._v("假设在master分支的B点拉出一个新的分支dev，经过一段时间开发后：")]),e._v(" "),a("p",[e._v("master分支上有两个新的提交M1和M2")]),e._v(" "),a("p",[e._v("dev分支上有三个提交D1，D2，和D3")]),e._v(" "),a("p",[e._v("A ─> B ─> M1 ─> M2 ─> master")]),e._v(" "),a("p",[e._v("A ─> B ─> D1 ─> D2 ─> D3 ─> dev")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("git checkout dev\ngit rebase -i master\ngit checkout master\ngit merge dev\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br")])]),a("ol",[a("li",[a("p",[e._v("执行rebase操作，结果是看起来dev分支是从M2拉出来的，而不是从B拉出来的，然后使用-i参数手动调整commit历史，是否合并如何合并。例如下rebase -i命令会弹出文本编辑框:")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("pick <D1> Message for commit #1\npick <D2> Message for commit #2\npick <D3> Message for commit #3\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br")])]),a("p",[e._v("假设D2是对D1的一个拼写错误修正，因此可以不需要显式的指出来，我们把D2修改为fixup：")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("pick <D1> Message for commit #1\nfixup <D2> Message for commit #2\npick <D3> Message for commit #3\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br")])]),a("p",[e._v("rebase之后的状态变为：")]),e._v(" "),a("p",[e._v("A ─> B ─> M1 ─> M2 ─> master")]),e._v(" "),a("p",[e._v("A ─> B ─> D1' ─> D3 ─> dev")])]),e._v(" "),a("li",[a("p",[e._v("再执行merge操作，把dev分支合并到master分支：")]),e._v(" "),a("p",[e._v("A ─> B ─> M1 ─> M2 ─> D1' ─> D3 ─> master")])])]),e._v(" "),a("h2",{attrs:{id:"git-commit-message"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#git-commit-message"}},[e._v("#")]),e._v(" Git Commit Message")]),e._v(" "),a("h3",{attrs:{id:"规范"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#规范"}},[e._v("#")]),e._v(" 规范")]),e._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",[e._v("此规范来自 Angular 规范的整理。")])]),e._v(" "),a("p",[e._v("Commit message 包括三个部分：Header、Body 和 Footer。")]),e._v(" "),a("p",[e._v("其中，Header 是必需的，Body 和 Footer 可以省略。")]),e._v(" "),a("p",[e._v("不管是哪一个部分，任何一行都不得超过72个字符（或100个字符）。这是为了避免自动换行影响美观。")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("<type>(<scope>): <subject>\n// 空一行\n<body>\n// 空一行\n<footer>\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br")])]),a("h4",{attrs:{id:"header"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#header"}},[e._v("#")]),e._v(" Header")]),e._v(" "),a("div",{staticClass:"custom-block warning"},[a("p",[e._v("格式： type(scope): subject")]),e._v(" "),a("p",[e._v("如果 type 为 feat 和 fix ，则该 commit 将肯定出现在 Change log 之中。")]),e._v(" "),a("p",[e._v("其他情况（docs、chore、style、refactor、test）由你决定，要不要放入 Change log，建议是不要。")])]),e._v(" "),a("ul",[a("li",[a("p",[e._v("type(必填)：用于说明commit的类别，只允许使用下面7个标识")]),e._v(" "),a("ul",[a("li",[e._v("feat：新功能（feature）")]),e._v(" "),a("li",[e._v("fix：修复bug")]),e._v(" "),a("li",[e._v("docs：修改文档（documentation）")]),e._v(" "),a("li",[e._v("style：仅仅修改了空格、缩进等，不改变代码逻辑，不影响代码运行的变动")]),e._v(" "),a("li",[e._v("refactor：重构（即不是新增功能，也不是修改bug的代码变动）")]),e._v(" "),a("li",[e._v("test：测试用例的修改")]),e._v(" "),a("li",[e._v("chore：构建过程或辅助工具的变动，非src和test的修改")])])]),e._v(" "),a("li",[a("p",[e._v("scope(可选)：用于说明commit的影响范围，比如数据层、控制层、视图层等等，视项目不同而不同")])]),e._v(" "),a("li",[a("p",[e._v("subject(必填)：commit的简要说明，不超过50个字符")]),e._v(" "),a("ul",[a("li",[e._v("以动词开头，使用第一人称现在时，比如change，而不是changed或changes")]),e._v(" "),a("li",[e._v("第一个字母小写")]),e._v(" "),a("li",[e._v("结尾不加句号（.）")])])])]),e._v(" "),a("h4",{attrs:{id:"body"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#body"}},[e._v("#")]),e._v(" Body")]),e._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",[e._v("Body 部分是对本次 commit 的详细描述，可以分成多行。")])]),e._v(" "),a("p",[e._v("下面是一个范例。")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("More detailed explanatory text, if necessary.  Wrap it to \nabout 72 characters or so. \n\nFurther paragraphs come after blank lines.\n\n- Bullet points are okay, too\n- Use a hanging indent\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br"),a("span",{staticClass:"line-number"},[e._v("6")]),a("br"),a("span",{staticClass:"line-number"},[e._v("7")]),a("br")])]),a("p",[e._v("有两个注意点。")]),e._v(" "),a("p",[e._v("（1）使用第一人称现在时，比如使用change而不是changed或changes。")]),e._v(" "),a("p",[e._v("（2）应该说明代码变动的动机，以及与以前行为的对比。")]),e._v(" "),a("h4",{attrs:{id:"footer"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#footer"}},[e._v("#")]),e._v(" Footer")]),e._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",[e._v("Footer 部分只用于两种情况。")])]),e._v(" "),a("ol",[a("li",[a("p",[e._v("不兼容变动")]),e._v(" "),a("p",[e._v("如果当前代码与上一个版本不兼容，则 Footer 部分以BREAKING CHANGE开头，后面是对变动的描述、以及变动理由和迁移方法。")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("BREAKING CHANGE: isolate scope bindings definition has changed.\n    To migrate the code follow the example below:\n\n    Before:\n\n    scope: {\n      myAttr: 'attribute',\n    }\n\n    After:\n\n    scope: {\n      myAttr: '@',\n    }\n\n    The removed `inject` wasn't generaly useful for directives so there should be no code using it\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br"),a("span",{staticClass:"line-number"},[e._v("6")]),a("br"),a("span",{staticClass:"line-number"},[e._v("7")]),a("br"),a("span",{staticClass:"line-number"},[e._v("8")]),a("br"),a("span",{staticClass:"line-number"},[e._v("9")]),a("br"),a("span",{staticClass:"line-number"},[e._v("10")]),a("br"),a("span",{staticClass:"line-number"},[e._v("11")]),a("br"),a("span",{staticClass:"line-number"},[e._v("12")]),a("br"),a("span",{staticClass:"line-number"},[e._v("13")]),a("br"),a("span",{staticClass:"line-number"},[e._v("14")]),a("br"),a("span",{staticClass:"line-number"},[e._v("15")]),a("br"),a("span",{staticClass:"line-number"},[e._v("16")]),a("br")])])]),e._v(" "),a("li",[a("p",[e._v("关闭 Issue")]),e._v(" "),a("p",[e._v("如果当前 commit 针对某个issue，那么可以在 Footer 部分关闭这个 issue 。")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("Closes #234\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("p",[e._v("也可以一次关闭多个 issue 。")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("Closes #123, #245, #992\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])])])]),e._v(" "),a("h4",{attrs:{id:"revert"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#revert"}},[e._v("#")]),e._v(" Revert")]),e._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",[e._v("还有一种特殊情况，如果当前 commit 用于撤销以前的 commit，则必须以revert:开头，后面跟着被撤销 Commit 的 Header。")])]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("revert: feat(pencil): add 'graphiteWidth' option\n\nThis reverts commit 667ecc1654a317a13331b17617d973392f415f02.\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br")])]),a("p",[e._v("Body部分的格式是固定的，必须写成 "),a("code",[e._v("This reverts commit <hash>.")]),e._v("，其中的hash是被撤销 commit 的 SHA 标识符。")]),e._v(" "),a("p",[e._v("如果当前 commit 与被撤销的 commit，在同一个发布（release）里面，那么它们都不会出现在 Change log 里面。如果两者在不同的发布，那么当前 commit，会出现在 Change log 的Reverts小标题下面。")]),e._v(" "),a("h3",{attrs:{id:"emoji-表情"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#emoji-表情"}},[e._v("#")]),e._v(" emoji 表情")]),e._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",[e._v("emoji 表情参考对应网站 "),a("a",{attrs:{href:"https://gitmoji.carloscuesta.me/",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://gitmoji.carloscuesta.me/"),a("OutboundLink")],1)])]),e._v(" "),a("p",[e._v("git commit 时，提交 emoji 信息遵循以下格式：")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v(":emoji1: :emoji2: 主题\n\n提交信息主体\n\nRef <###>\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br")])]),a("p",[e._v("初次提交示例：")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('git commit -m ":bug: fix a bug writtten"\n')])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("p",[e._v("emoji 指南")]),e._v(" "),a("table",[a("thead",[a("tr",[a("th",[e._v("emoji")]),e._v(" "),a("th",[e._v("emoji代码")]),e._v(" "),a("th",[e._v("Commit说明")])])]),e._v(" "),a("tbody",[a("tr",[a("td",[e._v("🎨 (调色板)")]),e._v(" "),a("td",[a("code",[e._v(":art:")])]),e._v(" "),a("td",[e._v("改进代码结构/代码格式")])]),e._v(" "),a("tr",[a("td",[e._v("🎨 (调色板)")]),e._v(" "),a("td",[a("code",[e._v(":art:")])]),e._v(" "),a("td",[e._v("改进代码结构/代码格式")])]),e._v(" "),a("tr",[a("td",[e._v("⚡  (闪电)")]),e._v(" "),a("td",[a("code",[e._v(":zap:")])]),e._v(" "),a("td",[e._v("提升性能")])]),e._v(" "),a("tr",[a("td",[e._v("🐎 (赛马)")]),e._v(" "),a("td",[a("code",[e._v(":racehorse:")])]),e._v(" "),a("td",[e._v("提升性能")])]),e._v(" "),a("tr",[a("td",[e._v("🔥 (火焰)")]),e._v(" "),a("td",[a("code",[e._v(":fire:")])]),e._v(" "),a("td",[e._v("移除代码或文件")])]),e._v(" "),a("tr",[a("td",[e._v("🐛 (bug)")]),e._v(" "),a("td",[a("code",[e._v(":bug:")])]),e._v(" "),a("td",[e._v("修复 bug")])]),e._v(" "),a("tr",[a("td",[e._v("🚑 (急救车)")]),e._v(" "),a("td",[a("code",[e._v(":ambulance:")])]),e._v(" "),a("td",[e._v("重要补丁")])]),e._v(" "),a("tr",[a("td",[e._v("✨ (火花)")]),e._v(" "),a("td",[a("code",[e._v(":sparkles:")])]),e._v(" "),a("td",[e._v("引入新功能")])]),e._v(" "),a("tr",[a("td",[e._v("📝 (铅笔)")]),e._v(" "),a("td",[a("code",[e._v(":pencil:")])]),e._v(" "),a("td",[e._v("撰写文档")])]),e._v(" "),a("tr",[a("td",[e._v("🚀 (火箭)")]),e._v(" "),a("td",[a("code",[e._v(":rocket:")])]),e._v(" "),a("td",[e._v("部署功能")])]),e._v(" "),a("tr",[a("td",[e._v("💄 (口红)")]),e._v(" "),a("td",[a("code",[e._v(":lipstick:")])]),e._v(" "),a("td",[e._v("更新 UI 和样式文件")])]),e._v(" "),a("tr",[a("td",[e._v("🎉 (庆祝)")]),e._v(" "),a("td",[a("code",[e._v(":tada:")])]),e._v(" "),a("td",[e._v("初次提交")])]),e._v(" "),a("tr",[a("td",[e._v("✅ (白色复选框)")]),e._v(" "),a("td",[a("code",[e._v(":white_check_mark:")])]),e._v(" "),a("td",[e._v("增加测试")])]),e._v(" "),a("tr",[a("td",[e._v("🔒  (锁)")]),e._v(" "),a("td",[a("code",[e._v(":lock:")])]),e._v(" "),a("td",[e._v("修复安全问题")])]),e._v(" "),a("tr",[a("td",[e._v("🍎 (苹果)")]),e._v(" "),a("td",[a("code",[e._v(":apple:")])]),e._v(" "),a("td",[e._v("修复 macOS 下的问题")])]),e._v(" "),a("tr",[a("td",[e._v("🐧 (企鹅)")]),e._v(" "),a("td",[a("code",[e._v(":penguin:")])]),e._v(" "),a("td",[e._v("修复 Linux 下的问题")])]),e._v(" "),a("tr",[a("td",[e._v("🏁 (旗帜)")]),e._v(" "),a("td",[a("code",[e._v(":checkered_flag:")])]),e._v(" "),a("td",[e._v("修复 Windows 下的问题")])]),e._v(" "),a("tr",[a("td",[e._v("🔖 (书签)")]),e._v(" "),a("td",[a("code",[e._v(":bookmark:")])]),e._v(" "),a("td",[e._v("发行/版本标签")])]),e._v(" "),a("tr",[a("td",[e._v("🚨 (警车灯)")]),e._v(" "),a("td",[a("code",[e._v(":rotating_light:")])]),e._v(" "),a("td",[e._v("移除 linter警告")])]),e._v(" "),a("tr",[a("td",[e._v("🚧 (施工)")]),e._v(" "),a("td",[a("code",[e._v(":construction:")])]),e._v(" "),a("td",[e._v("工作进行中")])]),e._v(" "),a("tr",[a("td",[e._v("💚 (绿心)")]),e._v(" "),a("td",[a("code",[e._v(":green_heart:")])]),e._v(" "),a("td",[e._v("修复 CI 构建问题")])]),e._v(" "),a("tr",[a("td",[e._v("⬇  (下降箭头)")]),e._v(" "),a("td",[a("code",[e._v(":arrow_down:")])]),e._v(" "),a("td",[e._v("降级依赖")])]),e._v(" "),a("tr",[a("td",[e._v("⬆  (上升箭头)")]),e._v(" "),a("td",[a("code",[e._v(":arrow_up:")])]),e._v(" "),a("td",[e._v("升级依赖")])]),e._v(" "),a("tr",[a("td",[e._v("👷 (工人)")]),e._v(" "),a("td",[a("code",[e._v(":construction_worker:")])]),e._v(" "),a("td",[e._v("添加 CI 构建系统")])]),e._v(" "),a("tr",[a("td",[e._v("📈 (上升趋势图)")]),e._v(" "),a("td",[a("code",[e._v(":chart_with_upwards_trend:")])]),e._v(" "),a("td",[e._v("添加分析或跟踪代码")])]),e._v(" "),a("tr",[a("td",[e._v("🔨 (锤子)")]),e._v(" "),a("td",[a("code",[e._v(":hammer:")])]),e._v(" "),a("td",[e._v("重大重构")])]),e._v(" "),a("tr",[a("td",[e._v("➖ (减号)")]),e._v(" "),a("td",[a("code",[e._v(":heavy_minus_sign:")])]),e._v(" "),a("td",[e._v("减少一个依赖")])]),e._v(" "),a("tr",[a("td",[e._v("🐳 (鲸鱼)")]),e._v(" "),a("td",[a("code",[e._v(":whale:")])]),e._v(" "),a("td",[e._v("Docker 相关工作")])]),e._v(" "),a("tr",[a("td",[e._v("➕ (加号)")]),e._v(" "),a("td",[a("code",[e._v(":heavy_plus_sign:")])]),e._v(" "),a("td",[e._v("增加一个依赖")])]),e._v(" "),a("tr",[a("td",[e._v("🔧 (扳手)")]),e._v(" "),a("td",[a("code",[e._v(":wrench:")])]),e._v(" "),a("td",[e._v("修改配置文件")])]),e._v(" "),a("tr",[a("td",[e._v("🌐  (地球)")]),e._v(" "),a("td",[a("code",[e._v(":globe_with_meridians:")])]),e._v(" "),a("td",[e._v("国际化与本地化")])]),e._v(" "),a("tr",[a("td",[e._v("✏ (铅笔)")]),e._v(" "),a("td",[a("code",[e._v(":pencil2:")])]),e._v(" "),a("td",[e._v("修复 typo")])])])]),e._v(" "),a("h3",{attrs:{id:"工具"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#工具"}},[e._v("#")]),e._v(" 工具")]),e._v(" "),a("h4",{attrs:{id:"commitizen"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#commitizen"}},[e._v("#")]),e._v(" Commitizen")]),e._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",[a("a",{attrs:{href:"https://github.com/commitizen/cz-cli",target:"_blank",rel:"noopener noreferrer"}},[e._v("Commitizen"),a("OutboundLink")],1),e._v(" 是一个撰写合格 Commit message 的工具。")])]),e._v(" "),a("p",[e._v("安装命令如下。")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("npm install -g commitizen\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("p",[e._v("然后，在项目目录里，运行下面的命令，使其支持 Angular 的 Commit message 格式。")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("commitizen init cz-conventional-changelog --save --save-exact\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("p",[e._v("以后，凡是用到git commit命令，一律改为使用git cz。这时，就会出现选项，用来生成符合格式的 Commit message。")]),e._v(" "),a("h4",{attrs:{id:"validate-commit-msg"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#validate-commit-msg"}},[e._v("#")]),e._v(" validate-commit-msg")]),e._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",[a("a",{attrs:{href:"https://github.com/kentcdodds/validate-commit-msg",target:"_blank",rel:"noopener noreferrer"}},[e._v("validate-commit-msg"),a("OutboundLink")],1),e._v(" 用于检查 Node 项目的 Commit message 是否符合格式。")])]),e._v(" "),a("p",[e._v("它的安装是手动的。首先，拷贝下面这个"),a("a",{attrs:{href:"https://github.com/kentcdodds/validate-commit-msg/blob/master/index.js",target:"_blank",rel:"noopener noreferrer"}},[e._v("JS文件"),a("OutboundLink")],1),e._v("，放入你的代码库。文件名可以取为validate-commit-msg.js。")]),e._v(" "),a("p",[e._v("接着，把这个脚本加入 Git 的 hook。下面是在package.json里面使用 "),a("a",{attrs:{href:"http://npm.im/ghooks",target:"_blank",rel:"noopener noreferrer"}},[e._v("ghooks"),a("OutboundLink")],1),e._v("，把这个脚本加为commit-msg时运行。")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('git add -A \ngit commit -m "edit markdown" \nINVALID COMMIT MSG: does not match "<type>(<scope>): <subject>" ! was: edit markdown\n')])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br")])]),a("h3",{attrs:{id:"自动生成-change-log"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#自动生成-change-log"}},[e._v("#")]),e._v(" 自动生成 Change Log")]),e._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",[e._v("如果你的所有 Commit 都符合 Angular 格式，那么发布新版本时， Change log 就可以用脚本自动生成（"),a("a",{attrs:{href:"https://github.com/ajoslin/conventional-changelog/blob/master/CHANGELOG.md",target:"_blank",rel:"noopener noreferrer"}},[e._v("例1"),a("OutboundLink")],1),e._v("，"),a("a",{attrs:{href:"https://github.com/karma-runner/karma/blob/master/CHANGELOG.md",target:"_blank",rel:"noopener noreferrer"}},[e._v("例2"),a("OutboundLink")],1),e._v("，"),a("a",{attrs:{href:"https://github.com/btford/grunt-conventional-changelog/blob/master/CHANGELOG.md",target:"_blank",rel:"noopener noreferrer"}},[e._v("例3"),a("OutboundLink")],1),e._v("）。")])]),e._v(" "),a("p",[e._v("生成的文档包括以下三个部分。")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("New features\nBug fixes\nBreaking changes.\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br")])]),a("p",[e._v("每个部分都会罗列相关的 commit ，并且有指向这些 commit 的链接。当然，生成的文档允许手动修改，所以发布前，你还可以添加其他内容。")]),e._v(" "),a("p",[a("a",{attrs:{href:"https://github.com/ajoslin/conventional-changelog",target:"_blank",rel:"noopener noreferrer"}},[e._v("conventional-changelog"),a("OutboundLink")],1),e._v(" 就是生成 Change log 的工具，运行下面的命令即可。")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("npm install -g conventional-changelog\ncd my-project\nconventional-changelog -p angular -i CHANGELOG.md -w\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br")])]),a("p",[e._v("上面命令不会覆盖以前的 Change log，只会在CHANGELOG.md的头部加上自从上次发布以来的变动。")]),e._v(" "),a("p",[e._v("如果你想生成所有发布的 Change log，要改为运行下面的命令。")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("conventional-changelog -p angular -i CHANGELOG.md -w -r 0\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("p",[e._v("为了方便使用，可以将其写入package.json的scripts字段。")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('{\n  "scripts": {\n    "changelog": "conventional-changelog -p angular -i CHANGELOG.md -w -r 0"\n  }\n}\n')])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br")])]),a("p",[e._v("以后，直接运行下面的命令即可。")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("npm run changelog\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])])])}),[],!1,null,null,null);t.default=r.exports}}]);