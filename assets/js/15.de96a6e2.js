(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{508:function(s,a,t){"use strict";t.r(a);var e=t(5),n=Object(e.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("Boxx"),s._v(" "),t("h2",{attrs:{id:"基本命令"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#基本命令"}},[s._v("#")]),s._v(" 基本命令")]),s._v(" "),t("h3",{attrs:{id:"提交日志"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#提交日志"}},[s._v("#")]),s._v(" 提交日志")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("git log // 查看全部提交日志，按 `q` 键退出\ngit log –pretty=oneline // 每一次提交日志只显示一行信息\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("h3",{attrs:{id:"远程仓库"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#远程仓库"}},[s._v("#")]),s._v(" 远程仓库")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("git remote // 查看远程仓库的信息\ngit remote -v // 查看远程仓库的详细信息\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("h3",{attrs:{id:"标签"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#标签"}},[s._v("#")]),s._v(" 标签")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('git tag // 显示所有标签\ngit tag -l "v3.3.*" // 显示过滤后的标签\ngit tag [name] // 新建标签\ngit tag -a [name] [commit_id] // 在指定的某个 commit 上添加标签\ngit tag -a [name] [commit_id] -m "备注信息" // -m 添加备注信息\ngit show [name] // 显示标签的详细信息 \ngit push origin [name] // 向远程分支提交单个标签\ngit push origin --tags // 推送所有标签\ngit tag -d [name] // 删除某个标签\ngit push origin :refs/tags/<name> // 远程删除标签\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br")])]),t("h3",{attrs:{id:"推送"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#推送"}},[s._v("#")]),s._v(" 推送")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("git push origin HEAD --force // 强制推送，慎用\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h3",{attrs:{id:"账号信息（用户名，邮箱）"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#账号信息（用户名，邮箱）"}},[s._v("#")]),s._v(" 账号信息（用户名，邮箱）")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("git config user.name // 查看当前登录的用户名\ngit config user.email // 查看当前登录的邮箱\n\ngit config user.name 'Your_User_Name' // 修改当前用户名\ngit config user.email 'Your_Email' // 修改当前邮箱\n\ngit config --global user.name 'Your_User_Name' // 修改全局用户名\ngit config --global user.email 'Your_Email' // 修改全局邮箱\n\ngit config --global --unset user.name // 删除全局配置的用户名\ngit config --global --unset user.email // 删除全局配置的邮箱\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br")])]),t("h2",{attrs:{id:"ssh"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ssh"}},[s._v("#")]),s._v(" SSH")]),s._v(" "),t("h3",{attrs:{id:"生成-ssh-key"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#生成-ssh-key"}},[s._v("#")]),s._v(" 生成 ssh key")]),s._v(" "),t("div",{staticClass:"custom-block warning"},[t("p",{staticClass:"title"}),t("p",[s._v("注意：这里的 "),t("code",[s._v("xxxxx@xxxxx.com")]),s._v(" 只是生成的 ssh key 的名称，并不约束或要求具体命名为某个邮箱")]),s._v(" "),t("p",[s._v("现网的大部分教程均讲解的使用邮箱生成，其一开始的初衷仅仅是为了便于辨识所以使用了邮箱")])]),t("p",[s._v("按照提示完成三次回车，即可生成 ssh key。通过查看 "),t("code",[s._v("~/.ssh/id_rsa.pub")]),s._v(" 文件内容，获取到你的 public key，然后将此 key 添加到 github、gitee、gitlab 即可")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('ssh-keygen -t rsa -C "xxxxx@xxxxx.com"\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h3",{attrs:{id:"同一电脑多个-ssh-key"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#同一电脑多个-ssh-key"}},[s._v("#")]),s._v(" 同一电脑多个 ssh key")]),s._v(" "),t("p",[s._v("同一电脑需要多个 "),t("code",[s._v("key")]),s._v(" 时，需添加配置文件，在 "),t("code",[s._v("~/.ssh")]),s._v(" 文件夹中添加 "),t("code",[s._v("config")]),s._v(" 文件，存放 "),t("code",[s._v("key")]),s._v(" 的文件不一样，需单独存放")]),s._v(" "),t("div",{staticClass:"language-editorconfig line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-editorconfig"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 配置")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Host 站点")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# HostName 站点名")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 优先使用公钥连接")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# PreferredAuthentications publickey")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# IdentityFile 私钥路径")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# User 用户名称")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# github 配置")]),s._v("\nHost github.com\nHostName github.com\nIdentityFile ~/.ssh/id_rsa\nUser git\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# gitee 配置")]),s._v("\nHost gitee.com\nHostName gitee.com\nIdentityFile ~/.ssh/id_rsa_gitee\nUser git\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 其它")]),s._v("\n...\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br")])]),t("h3",{attrs:{id:"测试"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#测试"}},[s._v("#")]),s._v(" 测试")]),s._v(" "),t("p",[s._v("格式："),t("code",[s._v("git@域名")]),s._v("，例如：")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("ssh -T git@github.com\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("提示以下内容，则表示配置成功")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("Hi xxx! You've successfully ... \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h2",{attrs:{id:"如何彻底删除已提交的-commit"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#如何彻底删除已提交的-commit"}},[s._v("#")]),s._v(" 如何彻底删除已提交的 commit")]),s._v(" "),t("div",{staticClass:"custom-block danger"},[t("p",{staticClass:"title"}),t("p",[s._v("此操作谨慎使用，千万不要随便使用")]),s._v(" "),t("p",[s._v("必须看懂之后才能操作，或者可以新建一个分支，测试一下效果")]),s._v(" "),t("p",[s._v("如果误操作删除了不该删除的，我也不知道怎么办，找回方法还没试过，以后再研究")])]),t("ol",[t("li",[t("p",[s._v("git reset --hard commit_id (可用 "),t("code",[s._v("git log –oneline")]),s._v(" 查看)")]),s._v(" "),t("p",[s._v("注意 git reset 的三种模式，--hard会删除commit_id之后提交的记录和工作区域")])]),s._v(" "),t("li",[t("p",[s._v("git push origin HEAD --force 强制推送")]),s._v(" "),t("p",[s._v("强推可能会导致其他用户提交的commit丢失")])])]),s._v(" "),t("h2",{attrs:{id:"如何修改已提交-commit-的用户信息"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#如何修改已提交-commit-的用户信息"}},[s._v("#")]),s._v(" 如何修改已提交 commit 的用户信息")]),s._v(" "),t("div",{staticClass:"custom-block danger"},[t("p",{staticClass:"title"}),t("p",[s._v("警告：此操作会破坏历史记录。")]),s._v(" "),t("p",[s._v("如果正在与其他人在存储库上进行协作，则重写已发布的历史记录被认为是不好的做法。")]),s._v(" "),t("p",[s._v("只应在紧急情况下这样做。")])]),t("ol",[t("li",[t("p",[s._v("Git Bash 复制并粘贴脚本，根据需要替换以下变量：")]),s._v(" "),t("ul",[t("li",[s._v("OLD_EMAIL: 旧的邮箱地址")]),s._v(" "),t("li",[s._v("CORRECT_NAME: 新的用户名")]),s._v(" "),t("li",[s._v("CORRECT_EMAIL: 新的邮箱地址")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('#!/bin/sh\n\ngit filter-branch --env-filter \'\n\nOLD_EMAIL="your-old-email@example.com"\nCORRECT_NAME="Your Correct Name"\nCORRECT_EMAIL="your-correct-email@example.com"\n\nif [ "$GIT_COMMITTER_EMAIL" = "$OLD_EMAIL" ]\nthen\nexport GIT_COMMITTER_NAME="$CORRECT_NAME"\nexport GIT_COMMITTER_EMAIL="$CORRECT_EMAIL"\nfi\nif [ "$GIT_AUTHOR_EMAIL" = "$OLD_EMAIL" ]\nthen\nexport GIT_AUTHOR_NAME="$CORRECT_NAME"\nexport GIT_AUTHOR_EMAIL="$CORRECT_EMAIL"\nfi\n\' --tag-name-filter cat -- --branches --tags\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br")])])]),s._v(" "),t("li",[t("p",[s._v("按Enter键运行脚本。")])]),s._v(" "),t("li",[t("p",[s._v("查看新的Git历史记录是否有错误。")])]),s._v(" "),t("li",[t("p",[s._v("将更正的历史记录推送到GitHub：")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("git push --force --tags origin 'refs/heads/*'\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])])])]),s._v(" "),t("h2",{attrs:{id:"分支"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#分支"}},[s._v("#")]),s._v(" 分支")]),s._v(" "),t("h3",{attrs:{id:"命名规范"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#命名规范"}},[s._v("#")]),s._v(" 命名规范")]),s._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"title"}),t("p",[s._v("几乎所有的版本控制系统都以某种形式支持分支。 使用分支意味着你可以把你的工作从开发主线上分离开来，以免影响开发主线。有人把 Git 的分支模型称为它的“必杀技特性”，因为基于指针的实现使其足够轻量。")]),s._v(" "),t("p",[s._v("Git 鼓励在工作流程中频繁地使用分支与合并，哪怕一天之内进行许多次，但仍要遵循一定的规范。")])]),t("p",[s._v("当有一组 feature 开发完成，首先会合并到 develop 分支，进入提测时，会创建 release 分支。")]),s._v(" "),t("p",[s._v("如果测试过程中存在 bug 需要修复，则直接由开发者在 release 分支修复并提交。")]),s._v(" "),t("p",[s._v("当测试完成之后，合并 release 分支到 master 和 develop 分支，此时 master 为最新代码，用作上线。")]),s._v(" "),t("p",[s._v("以下规范不一定是必须的，一般是根据实际情况来的，总结下自己工作中的一些问题")]),s._v(" "),t("ul",[t("li",[s._v("自己的分支一定要自测，切记不要提交后，影响到其他代码，更别说别人拉下代码还报错这种低级错误")]),s._v(" "),t("li",[s._v("本地分支要做到勤提交，分小功能提交，一次提交一大堆各种功能的做法也要杜绝")]),s._v(" "),t("li",[s._v("每天第一件事就是更新 develop 分支内容到本地分支，避免大规模 merge，太容易出错了")]),s._v(" "),t("li",[s._v("迭代新版本时，一定要保证当前开发分支和线上分支一样")])]),s._v(" "),t("h4",{attrs:{id:"master"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#master"}},[s._v("#")]),s._v(" master")]),s._v(" "),t("ul",[t("li",[s._v("master 为主分支，也是用于部署生产环境的分支，master 分支要确保稳定性")]),s._v(" "),t("li",[s._v("master 分支一般由 develop 以及 hotfix 分支合并，任何时间都不能直接修改代码")])]),s._v(" "),t("h4",{attrs:{id:"develop"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#develop"}},[s._v("#")]),s._v(" develop")]),s._v(" "),t("ul",[t("li",[s._v("develop 为开发分支，始终保持最新完成以及bug修复后的代码")]),s._v(" "),t("li",[s._v("一般开发新功能时，feature 分支都是基于 develop 分支下创建的")])]),s._v(" "),t("h4",{attrs:{id:"feature"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#feature"}},[s._v("#")]),s._v(" feature")]),s._v(" "),t("ul",[t("li",[s._v("开发新功能时，以 develop 分支为基础创建 feature 分支")]),s._v(" "),t("li",[s._v("分支命名: feature/ 开头的为特性分支， 命名规则: feature/user_module、 feature/cart_module")])]),s._v(" "),t("h4",{attrs:{id:"release"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#release"}},[s._v("#")]),s._v(" release")]),s._v(" "),t("ul",[t("li",[s._v("release 为预上线分支，发布提测阶段，以 release 分支代码为基准提测")])]),s._v(" "),t("h4",{attrs:{id:"hotfix"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#hotfix"}},[s._v("#")]),s._v(" hotfix")]),s._v(" "),t("ul",[t("li",[s._v("分支命名: hotfix/ 开头的为修复分支，它的命名规则与 feature 分支类似")]),s._v(" "),t("li",[s._v("线上出现紧急问题时，需要及时修复，以 master 分支为基线，创建 hotfix 分支，修复完成后，需要合并到 master 分支和 develop 分支")])]),s._v(" "),t("h3",{attrs:{id:"分支合并"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#分支合并"}},[s._v("#")]),s._v(" 分支合并")]),s._v(" "),t("div",{staticClass:"custom-block warning"},[t("p",{staticClass:"title"}),t("p",[s._v("git merge --squash [branch] 会变更提交者作者信息，追溯困难，解决方法是由 branch 分支作者来合并到当前分支")]),s._v(" "),t("p",[s._v("若要合并分支时需要合并commit，建议选用 rebase merge")])]),t("h4",{attrs:{id:"_1-git-merge-branch"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-git-merge-branch"}},[s._v("#")]),s._v(" 1. git merge [branch]")]),s._v(" "),t("p",[s._v("将 branch 分支的 commit 全部合并到当前分支")]),s._v(" "),t("h4",{attrs:{id:"_2-git-merge-squash-branch"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-git-merge-squash-branch"}},[s._v("#")]),s._v(" 2. git merge --squash [branch]")]),s._v(" "),t("p",[s._v("将 branch 分支上的所有 commit 合并到一个 commit 上，然后提交到主干。")]),s._v(" "),t("h4",{attrs:{id:"_3-rebase-merge"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-rebase-merge"}},[s._v("#")]),s._v(" 3. rebase merge")]),s._v(" "),t("div",{staticClass:"custom-block warning"},[t("p",{staticClass:"title"}),t("p",[s._v("注意：在执行rebase的时候可能会出现冲突的问题，此时需要手工解决冲突的问题，然后执行(git add)命令；所有冲突解决完之后，这时不需要执行(git commit)命令，而是运行(git rebase --continue)命令，一直到rebase完成；如果中途想放弃rebase操作，可以运行(git rebase --abort)命令回到rebase之前的状态。")])]),t("p",[s._v("假设在master分支的B点拉出一个新的分支dev，经过一段时间开发后：")]),s._v(" "),t("p",[s._v("master分支上有两个新的提交M1和M2")]),s._v(" "),t("p",[s._v("dev分支上有三个提交D1，D2，和D3")]),s._v(" "),t("p",[s._v("A ─> B ─> M1 ─> M2 ─> master")]),s._v(" "),t("p",[s._v("A ─> B ─> D1 ─> D2 ─> D3 ─> dev")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("git checkout dev\ngit rebase -i master\ngit checkout master\ngit merge dev\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("ol",[t("li",[t("p",[s._v("执行rebase操作，结果是看起来dev分支是从M2拉出来的，而不是从B拉出来的，然后使用-i参数手动调整commit历史，是否合并如何合并。例如下rebase -i命令会弹出文本编辑框:")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("pick <D1> Message for commit #1\npick <D2> Message for commit #2\npick <D3> Message for commit #3\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[s._v("假设D2是对D1的一个拼写错误修正，因此可以不需要显式的指出来，我们把D2修改为fixup：")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("pick <D1> Message for commit #1\nfixup <D2> Message for commit #2\npick <D3> Message for commit #3\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[s._v("rebase之后的状态变为：")]),s._v(" "),t("p",[s._v("A ─> B ─> M1 ─> M2 ─> master")]),s._v(" "),t("p",[s._v("A ─> B ─> D1' ─> D3 ─> dev")])]),s._v(" "),t("li",[t("p",[s._v("再执行merge操作，把dev分支合并到master分支：")]),s._v(" "),t("p",[s._v("A ─> B ─> M1 ─> M2 ─> D1' ─> D3 ─> master")])])]),s._v(" "),t("h2",{attrs:{id:"git-commit-message"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#git-commit-message"}},[s._v("#")]),s._v(" Git Commit Message")]),s._v(" "),t("h3",{attrs:{id:"规范"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#规范"}},[s._v("#")]),s._v(" 规范")]),s._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"title"}),t("p",[s._v("此规范来自 Angular 规范的整理。")])]),t("p",[s._v("Commit message 包括三个部分：Header、Body 和 Footer。")]),s._v(" "),t("p",[s._v("其中，Header 是必需的，Body 和 Footer 可以省略。")]),s._v(" "),t("p",[s._v("不管是哪一个部分，任何一行都不得超过72个字符（或100个字符）。这是为了避免自动换行影响美观。")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("<type>(<scope>): <subject>\n// 空一行\n<body>\n// 空一行\n<footer>\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("h4",{attrs:{id:"header"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#header"}},[s._v("#")]),s._v(" Header")]),s._v(" "),t("div",{staticClass:"custom-block warning"},[t("p",{staticClass:"title"}),t("p",[s._v("格式： type(scope): subject")]),s._v(" "),t("p",[s._v("如果 type 为 feat 和 fix ，则该 commit 将肯定出现在 Change log 之中。")]),s._v(" "),t("p",[s._v("其他情况（docs、chore、style、refactor、test）由你决定，要不要放入 Change log，建议是不要。")])]),t("ul",[t("li",[t("p",[s._v("type(必填)：用于说明commit的类别，只允许使用下面7个标识")]),s._v(" "),t("ul",[t("li",[s._v("feat：新功能（feature）")]),s._v(" "),t("li",[s._v("fix：修复bug")]),s._v(" "),t("li",[s._v("docs：修改文档（documentation）")]),s._v(" "),t("li",[s._v("style：仅仅修改了空格、缩进等，不改变代码逻辑，不影响代码运行的变动")]),s._v(" "),t("li",[s._v("refactor：重构（即不是新增功能，也不是修改bug的代码变动）")]),s._v(" "),t("li",[s._v("test：测试用例的修改")]),s._v(" "),t("li",[s._v("chore：构建过程或辅助工具的变动，非src和test的修改")])])]),s._v(" "),t("li",[t("p",[s._v("scope(可选)：用于说明commit的影响范围，比如数据层、控制层、视图层等等，视项目不同而不同")])]),s._v(" "),t("li",[t("p",[s._v("subject(必填)：commit的简要说明，不超过50个字符")]),s._v(" "),t("ul",[t("li",[s._v("以动词开头，使用第一人称现在时，比如change，而不是changed或changes")]),s._v(" "),t("li",[s._v("第一个字母小写")]),s._v(" "),t("li",[s._v("结尾不加句号（.）")])])])]),s._v(" "),t("h4",{attrs:{id:"body"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#body"}},[s._v("#")]),s._v(" Body")]),s._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"title"}),t("p",[s._v("Body 部分是对本次 commit 的详细描述，可以分成多行。")])]),t("p",[s._v("下面是一个范例。")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("More detailed explanatory text, if necessary.  Wrap it to \nabout 72 characters or so. \n\nFurther paragraphs come after blank lines.\n\n- Bullet points are okay, too\n- Use a hanging indent\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br")])]),t("p",[s._v("有两个注意点。")]),s._v(" "),t("p",[s._v("（1）使用第一人称现在时，比如使用change而不是changed或changes。")]),s._v(" "),t("p",[s._v("（2）应该说明代码变动的动机，以及与以前行为的对比。")]),s._v(" "),t("h4",{attrs:{id:"footer"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#footer"}},[s._v("#")]),s._v(" Footer")]),s._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"title"}),t("p",[s._v("Footer 部分只用于两种情况。")])]),t("ol",[t("li",[t("p",[s._v("不兼容变动")]),s._v(" "),t("p",[s._v("如果当前代码与上一个版本不兼容，则 Footer 部分以BREAKING CHANGE开头，后面是对变动的描述、以及变动理由和迁移方法。")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("BREAKING CHANGE: isolate scope bindings definition has changed.\n    To migrate the code follow the example below:\n\n    Before:\n\n    scope: {\n      myAttr: 'attribute',\n    }\n\n    After:\n\n    scope: {\n      myAttr: '@',\n    }\n\n    The removed `inject` wasn't generaly useful for directives so there should be no code using it\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br")])])]),s._v(" "),t("li",[t("p",[s._v("关闭 Issue")]),s._v(" "),t("p",[s._v("如果当前 commit 针对某个issue，那么可以在 Footer 部分关闭这个 issue 。")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("Closes #234\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("也可以一次关闭多个 issue 。")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("Closes #123, #245, #992\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])])])]),s._v(" "),t("h4",{attrs:{id:"revert"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#revert"}},[s._v("#")]),s._v(" Revert")]),s._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"title"}),t("p",[s._v("还有一种特殊情况，如果当前 commit 用于撤销以前的 commit，则必须以revert:开头，后面跟着被撤销 Commit 的 Header。")])]),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("revert: feat(pencil): add 'graphiteWidth' option\n\nThis reverts commit 667ecc1654a317a13331b17617d973392f415f02.\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[s._v("Body部分的格式是固定的，必须写成 "),t("code",[s._v("This reverts commit <hash>.")]),s._v("，其中的hash是被撤销 commit 的 SHA 标识符。")]),s._v(" "),t("p",[s._v("如果当前 commit 与被撤销的 commit，在同一个发布（release）里面，那么它们都不会出现在 Change log 里面。如果两者在不同的发布，那么当前 commit，会出现在 Change log 的Reverts小标题下面。")]),s._v(" "),t("h3",{attrs:{id:"emoji-表情"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#emoji-表情"}},[s._v("#")]),s._v(" emoji 表情")]),s._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"title"}),t("p",[s._v("emoji 表情参考对应网站 "),t("a",{attrs:{href:"https://gitmoji.carloscuesta.me/",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://gitmoji.carloscuesta.me/"),t("OutboundLink")],1)])]),t("p",[s._v("git commit 时，提交 emoji 信息遵循以下格式：")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v(":emoji1: :emoji2: 主题\n\n提交信息主体\n\nRef <###>\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("p",[s._v("初次提交示例：")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('git commit -m ":bug: fix a bug writtten"\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("emoji 指南")]),s._v(" "),t("table",[t("thead",[t("tr",[t("th",[s._v("emoji")]),s._v(" "),t("th",[s._v("emoji代码")]),s._v(" "),t("th",[s._v("Commit说明")])])]),s._v(" "),t("tbody",[t("tr",[t("td",[s._v("🎨 (调色板)")]),s._v(" "),t("td",[t("code",[s._v(":art:")])]),s._v(" "),t("td",[s._v("改进代码结构/代码格式")])]),s._v(" "),t("tr",[t("td",[s._v("⚡  (闪电)")]),s._v(" "),t("td",[t("code",[s._v(":zap:")])]),s._v(" "),t("td",[s._v("提升性能")])]),s._v(" "),t("tr",[t("td",[s._v("🐎 (赛马)")]),s._v(" "),t("td",[t("code",[s._v(":racehorse:")])]),s._v(" "),t("td",[s._v("提升性能")])]),s._v(" "),t("tr",[t("td",[s._v("🔥 (火焰)")]),s._v(" "),t("td",[t("code",[s._v(":fire:")])]),s._v(" "),t("td",[s._v("移除代码或文件")])]),s._v(" "),t("tr",[t("td",[s._v("🐛 (bug)")]),s._v(" "),t("td",[t("code",[s._v(":bug:")])]),s._v(" "),t("td",[s._v("修复 bug")])]),s._v(" "),t("tr",[t("td",[s._v("🚑 (急救车)")]),s._v(" "),t("td",[t("code",[s._v(":ambulance:")])]),s._v(" "),t("td",[s._v("重要补丁")])]),s._v(" "),t("tr",[t("td",[s._v("✨ (火花)")]),s._v(" "),t("td",[t("code",[s._v(":sparkles:")])]),s._v(" "),t("td",[s._v("引入新功能")])]),s._v(" "),t("tr",[t("td",[s._v("📝 (铅笔)")]),s._v(" "),t("td",[t("code",[s._v(":pencil:")])]),s._v(" "),t("td",[s._v("撰写文档")])]),s._v(" "),t("tr",[t("td",[s._v("🚀 (火箭)")]),s._v(" "),t("td",[t("code",[s._v(":rocket:")])]),s._v(" "),t("td",[s._v("部署功能")])]),s._v(" "),t("tr",[t("td",[s._v("💄 (口红)")]),s._v(" "),t("td",[t("code",[s._v(":lipstick:")])]),s._v(" "),t("td",[s._v("更新 UI 和样式文件")])]),s._v(" "),t("tr",[t("td",[s._v("🎉 (庆祝)")]),s._v(" "),t("td",[t("code",[s._v(":tada:")])]),s._v(" "),t("td",[s._v("初次提交")])]),s._v(" "),t("tr",[t("td",[s._v("✅ (白色复选框)")]),s._v(" "),t("td",[t("code",[s._v(":white_check_mark:")])]),s._v(" "),t("td",[s._v("增加测试")])]),s._v(" "),t("tr",[t("td",[s._v("🔒  (锁)")]),s._v(" "),t("td",[t("code",[s._v(":lock:")])]),s._v(" "),t("td",[s._v("修复安全问题")])]),s._v(" "),t("tr",[t("td",[s._v("🍎 (苹果)")]),s._v(" "),t("td",[t("code",[s._v(":apple:")])]),s._v(" "),t("td",[s._v("修复 macOS 下的问题")])]),s._v(" "),t("tr",[t("td",[s._v("🐧 (企鹅)")]),s._v(" "),t("td",[t("code",[s._v(":penguin:")])]),s._v(" "),t("td",[s._v("修复 Linux 下的问题")])]),s._v(" "),t("tr",[t("td",[s._v("🏁 (旗帜)")]),s._v(" "),t("td",[t("code",[s._v(":checkered_flag:")])]),s._v(" "),t("td",[s._v("修复 Windows 下的问题")])]),s._v(" "),t("tr",[t("td",[s._v("🔖 (书签)")]),s._v(" "),t("td",[t("code",[s._v(":bookmark:")])]),s._v(" "),t("td",[s._v("发行/版本标签")])]),s._v(" "),t("tr",[t("td",[s._v("🚨 (警车灯)")]),s._v(" "),t("td",[t("code",[s._v(":rotating_light:")])]),s._v(" "),t("td",[s._v("移除 linter警告")])]),s._v(" "),t("tr",[t("td",[s._v("🚧 (施工)")]),s._v(" "),t("td",[t("code",[s._v(":construction:")])]),s._v(" "),t("td",[s._v("工作进行中")])]),s._v(" "),t("tr",[t("td",[s._v("💚 (绿心)")]),s._v(" "),t("td",[t("code",[s._v(":green_heart:")])]),s._v(" "),t("td",[s._v("修复 CI 构建问题")])]),s._v(" "),t("tr",[t("td",[s._v("⬇  (下降箭头)")]),s._v(" "),t("td",[t("code",[s._v(":arrow_down:")])]),s._v(" "),t("td",[s._v("降级依赖")])]),s._v(" "),t("tr",[t("td",[s._v("⬆  (上升箭头)")]),s._v(" "),t("td",[t("code",[s._v(":arrow_up:")])]),s._v(" "),t("td",[s._v("升级依赖")])]),s._v(" "),t("tr",[t("td",[s._v("👷 (工人)")]),s._v(" "),t("td",[t("code",[s._v(":construction_worker:")])]),s._v(" "),t("td",[s._v("添加 CI 构建系统")])]),s._v(" "),t("tr",[t("td",[s._v("📈 (上升趋势图)")]),s._v(" "),t("td",[t("code",[s._v(":chart_with_upwards_trend:")])]),s._v(" "),t("td",[s._v("添加分析或跟踪代码")])]),s._v(" "),t("tr",[t("td",[s._v("🔨 (锤子)")]),s._v(" "),t("td",[t("code",[s._v(":hammer:")])]),s._v(" "),t("td",[s._v("重大重构")])]),s._v(" "),t("tr",[t("td",[s._v("➖ (减号)")]),s._v(" "),t("td",[t("code",[s._v(":heavy_minus_sign:")])]),s._v(" "),t("td",[s._v("减少一个依赖")])]),s._v(" "),t("tr",[t("td",[s._v("🐳 (鲸鱼)")]),s._v(" "),t("td",[t("code",[s._v(":whale:")])]),s._v(" "),t("td",[s._v("Docker 相关工作")])]),s._v(" "),t("tr",[t("td",[s._v("➕ (加号)")]),s._v(" "),t("td",[t("code",[s._v(":heavy_plus_sign:")])]),s._v(" "),t("td",[s._v("增加一个依赖")])]),s._v(" "),t("tr",[t("td",[s._v("🔧 (扳手)")]),s._v(" "),t("td",[t("code",[s._v(":wrench:")])]),s._v(" "),t("td",[s._v("修改配置文件")])]),s._v(" "),t("tr",[t("td",[s._v("🌐  (地球)")]),s._v(" "),t("td",[t("code",[s._v(":globe_with_meridians:")])]),s._v(" "),t("td",[s._v("国际化与本地化")])]),s._v(" "),t("tr",[t("td",[s._v("✏ (铅笔)")]),s._v(" "),t("td",[t("code",[s._v(":pencil2:")])]),s._v(" "),t("td",[s._v("修复 typo")])])])]),s._v(" "),t("h3",{attrs:{id:"工具"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#工具"}},[s._v("#")]),s._v(" 工具")]),s._v(" "),t("h4",{attrs:{id:"commitizen"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#commitizen"}},[s._v("#")]),s._v(" Commitizen")]),s._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"title"}),t("p",[t("a",{attrs:{href:"https://github.com/commitizen/cz-cli",target:"_blank",rel:"noopener noreferrer"}},[s._v("Commitizen"),t("OutboundLink")],1),s._v(" 是一个撰写合格 Commit message 的工具。")])]),t("p",[s._v("安装命令如下。")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("npm install -g commitizen\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("然后，在项目目录里，运行下面的命令，使其支持 Angular 的 Commit message 格式。")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("commitizen init cz-conventional-changelog --save --save-exact\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("以后，凡是用到git commit命令，一律改为使用git cz。这时，就会出现选项，用来生成符合格式的 Commit message。")]),s._v(" "),t("h4",{attrs:{id:"validate-commit-msg"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#validate-commit-msg"}},[s._v("#")]),s._v(" validate-commit-msg")]),s._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"title"}),t("p",[t("a",{attrs:{href:"https://github.com/kentcdodds/validate-commit-msg",target:"_blank",rel:"noopener noreferrer"}},[s._v("validate-commit-msg"),t("OutboundLink")],1),s._v(" 用于检查 Node 项目的 Commit message 是否符合格式。")])]),t("p",[s._v("它的安装是手动的。首先，拷贝下面这个"),t("a",{attrs:{href:"https://github.com/kentcdodds/validate-commit-msg/blob/master/index.js",target:"_blank",rel:"noopener noreferrer"}},[s._v("JS文件"),t("OutboundLink")],1),s._v("，放入你的代码库。文件名可以取为validate-commit-msg.js。")]),s._v(" "),t("p",[s._v("接着，把这个脚本加入 Git 的 hook。下面是在package.json里面使用 "),t("a",{attrs:{href:"http://npm.im/ghooks",target:"_blank",rel:"noopener noreferrer"}},[s._v("ghooks"),t("OutboundLink")],1),s._v("，把这个脚本加为commit-msg时运行。")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('git add -A \ngit commit -m "edit markdown" \nINVALID COMMIT MSG: does not match "<type>(<scope>): <subject>" ! was: edit markdown\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("h3",{attrs:{id:"自动生成-change-log"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#自动生成-change-log"}},[s._v("#")]),s._v(" 自动生成 Change Log")]),s._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"title"}),t("p",[s._v("如果你的所有 Commit 都符合 Angular 格式，那么发布新版本时， Change log 就可以用脚本自动生成（"),t("a",{attrs:{href:"https://github.com/ajoslin/conventional-changelog/blob/master/CHANGELOG.md",target:"_blank",rel:"noopener noreferrer"}},[s._v("例1"),t("OutboundLink")],1),s._v("，"),t("a",{attrs:{href:"https://github.com/karma-runner/karma/blob/master/CHANGELOG.md",target:"_blank",rel:"noopener noreferrer"}},[s._v("例2"),t("OutboundLink")],1),s._v("，"),t("a",{attrs:{href:"https://github.com/btford/grunt-conventional-changelog/blob/master/CHANGELOG.md",target:"_blank",rel:"noopener noreferrer"}},[s._v("例3"),t("OutboundLink")],1),s._v("）。")])]),t("p",[s._v("生成的文档包括以下三个部分。")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("New features\nBug fixes\nBreaking changes.\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[s._v("每个部分都会罗列相关的 commit ，并且有指向这些 commit 的链接。当然，生成的文档允许手动修改，所以发布前，你还可以添加其他内容。")]),s._v(" "),t("p",[t("a",{attrs:{href:"https://github.com/ajoslin/conventional-changelog",target:"_blank",rel:"noopener noreferrer"}},[s._v("conventional-changelog"),t("OutboundLink")],1),s._v(" 就是生成 Change log 的工具，运行下面的命令即可。")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("npm install -g conventional-changelog\ncd my-project\nconventional-changelog -p angular -i CHANGELOG.md -w\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[s._v("上面命令不会覆盖以前的 Change log，只会在CHANGELOG.md的头部加上自从上次发布以来的变动。")]),s._v(" "),t("p",[s._v("如果你想生成所有发布的 Change log，要改为运行下面的命令。")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("conventional-changelog -p angular -i CHANGELOG.md -w -r 0\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("为了方便使用，可以将其写入package.json的scripts字段。")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('{\n  "scripts": {\n    "changelog": "conventional-changelog -p angular -i CHANGELOG.md -w -r 0"\n  }\n}\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("p",[s._v("以后，直接运行下面的命令即可。")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("npm run changelog\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h2",{attrs:{id:"搭建-git-服务器"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#搭建-git-服务器"}},[s._v("#")]),s._v(" 搭建 Git 服务器")]),s._v(" "),t("h3",{attrs:{id:"安装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装"}},[s._v("#")]),s._v(" 安装")]),s._v(" "),t("div",{staticClass:"language-shell script line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt-get")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看版本")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" --version\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("h3",{attrs:{id:"创建用户"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#创建用户"}},[s._v("#")]),s._v(" 创建用户")]),s._v(" "),t("div",{staticClass:"language-shell script line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看已创建的用户列表")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" /etc/passwd"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" -v nologin"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" -v "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("halt")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" -v "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("shutdown")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("awk")]),s._v(" -F"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('":"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'{ print "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$1")]),s._v('"|"'),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$3")]),s._v('"|"'),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$4")]),s._v(" }'")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("more")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 返回的结果")]),s._v("\nroot"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sync")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("65534")]),s._v("\ntss"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("106")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("111")]),s._v("\npollinate"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("110")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\nubuntu"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1000")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1000")]),s._v("\nlxd"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("998")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),s._v("\nlighthouse"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1001")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1001")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 创建用户并创建此用户的文件夹，若仅需创建用户，请使用 useradd")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" adduser 用户名\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#... 按照提示配置姓名、邮箱、密码等即可")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 删除用户")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("userdel")]),s._v(" 用户名\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br")])]),t("h3",{attrs:{id:"创建仓库"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#创建仓库"}},[s._v("#")]),s._v(" 创建仓库")]),s._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"title"}),t("p",[s._v("注意："),t("code",[s._v("git init --bare")]),s._v("用于初始化服务器仓库，"),t("code",[s._v("git init")]),s._v("用于初始化本地仓库")])]),t("div",{staticClass:"language-shell script line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 进入home文件夹")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /home\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 创建仓库文件夹")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" project.git\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 初始化仓库")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" init --bare project.git\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("h3",{attrs:{id:"本地使用"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#本地使用"}},[s._v("#")]),s._v(" 本地使用")]),s._v(" "),t("div",{staticClass:"language-shell script line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 同步本地仓库，之后输入密码即可")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" clone Git用户名@服务器IP地址:/home/project.git\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("h3",{attrs:{id:"使用hook实现自动部署"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#使用hook实现自动部署"}},[s._v("#")]),s._v(" 使用hook实现自动部署")]),s._v(" "),t("ol",[t("li",[t("p",[s._v("进入hooks文件夹")]),s._v(" "),t("div",{staticClass:"language-shell script line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /home/project.git/hooks\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])])]),s._v(" "),t("li",[t("p",[s._v("创建"),t("code",[s._v("post-update")]),s._v("或者"),t("code",[s._v("post-receive")])]),s._v(" "),t("div",{staticClass:"language-shell script line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 创建并编辑")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" post-update\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])])]),s._v(" "),t("li",[t("p",[s._v("编辑"),t("code",[s._v("post-update")])]),s._v(" "),t("p",[s._v("按"),t("code",[s._v("I")]),s._v("进入编辑，"),t("code",[s._v("Esc")]),s._v("退出编辑，退出编辑后输入"),t("code",[s._v(":wq")]),s._v("保存并退出文件编辑")]),s._v(" "),t("div",{staticClass:"language-shell script line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token shebang important"}},[s._v("#!/bin/sh")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 项目名")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("PROJECT_NAME")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("project\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 打包后的包名")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("PROJECT_DIST")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("dist\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 项目路径，临时存放git的代码路径和仓库地址")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("PROJECT_DIR")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/home/"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$PROJECT_NAME")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 存放打包后的包文件路径")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("PACKAGE_DIR")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/home/html/"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$PROJECT_NAME")]),s._v("\n\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" -d "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$PROJECT_DIR")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("then")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" -rf "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$PROJECT_DIR")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("fi")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$PROJECT_DIR")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("chmod")]),s._v(" -R "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("777")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$PROJECT_DIR")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" -d "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$PACKAGE_DIR")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("then")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" -rf "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$PACKAGE_DIR")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("fi")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$PROJECT_DIR")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("unset")]),s._v(" GIT_DIR "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 必须重置，否则无法进入文件夹")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" init\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" remote "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" origin "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$PROJECT_DIR")]),s._v(".git\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" pull origin master\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 安装依赖，并打包，将打包文件放入nginx配置的路径中")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" run build\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("mv")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$PROJECT_DIST")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$PACKAGE_DIR")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$PACKAGE_DIR")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("unset")]),s._v(" GIT_DIR\n\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" -rf "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$PROJECT_NAME")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br"),t("span",{staticClass:"line-number"},[s._v("35")]),t("br"),t("span",{staticClass:"line-number"},[s._v("36")]),t("br"),t("span",{staticClass:"line-number"},[s._v("37")]),t("br")])])]),s._v(" "),t("li",[t("p",[s._v("修改"),t("code",[s._v("post-update")]),s._v("权限（赋予执行权限）")]),s._v(" "),t("div",{staticClass:"language-shell script line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("chmod")]),s._v(" +x post-update\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])])]),s._v(" "),t("li",[t("p",[s._v("完成之后，本地往服务器推送("),t("code",[s._v("push")]),s._v(")代码，即可触发"),t("code",[s._v("post-update")]),s._v("文件内的命令")])])])],1)}),[],!1,null,null,null);a.default=n.exports}}]);