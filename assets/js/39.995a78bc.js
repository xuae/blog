(window.webpackJsonp=window.webpackJsonp||[]).push([[39],{563:function(s,a,t){"use strict";t.r(a);var e=t(5),r=Object(e.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("Boxx"),s._v(" "),t("h2",{attrs:{id:"系统环境"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#系统环境"}},[s._v("#")]),s._v(" 系统环境")]),s._v(" "),t("ul",[t("li",[s._v("操作系统：Ubuntu Server 20.04 LTS 64bit")]),s._v(" "),t("li",[s._v("PostgreSQL版本：12.9")])]),s._v(" "),t("h2",{attrs:{id:"安装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装"}},[s._v("#")]),s._v(" 安装")]),s._v(" "),t("p",[s._v("直接使用命令安装")]),s._v(" "),t("p",[t("code",[s._v("postgresql-contrib")]),s._v(" 或者说 contrib 包，包含一些不属于 PostgreSQL 核心包的实用工具和功能，最好将 contrib 包与 PostgreSQL 核心一起安装。")]),s._v(" "),t("div",{staticClass:"language-shell script line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" postgresql postgresql-contrib\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h2",{attrs:{id:"是否安装成功"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#是否安装成功"}},[s._v("#")]),s._v(" 是否安装成功")]),s._v(" "),t("p",[s._v("使用以下命令，检测是否安装成功")]),s._v(" "),t("div",{staticClass:"language-shell script line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("psql -V\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 正常显示版本号，即安装成功")]),s._v("\npsql "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("PostgreSQL"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("12.9")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Ubuntu "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("12.9")]),s._v("-0ubuntu0.20.04.1"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[s._v("也可以通过执行以下命令来检查 PostgreSQL 是否正在运行")]),s._v(" "),t("div",{staticClass:"language-shell script line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("service")]),s._v(" postgresql status\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("通过 "),t("code",[s._v("service")]),s._v(" 命令，你可以启动、关闭或重启 "),t("code",[s._v("postgresql")]),s._v("。输入 "),t("code",[s._v("service postgresql")]),s._v(" 并按回车将列出所有选项。")]),s._v(" "),t("h3",{attrs:{id:"启动服务"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#启动服务"}},[s._v("#")]),s._v(" 启动服务")]),s._v(" "),t("div",{staticClass:"language-shell script line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("service")]),s._v(" postgresql start\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h3",{attrs:{id:"关闭服务"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#关闭服务"}},[s._v("#")]),s._v(" 关闭服务")]),s._v(" "),t("div",{staticClass:"language-shell script line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("service")]),s._v(" postgresql stop\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h3",{attrs:{id:"重启服务"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#重启服务"}},[s._v("#")]),s._v(" 重启服务")]),s._v(" "),t("div",{staticClass:"language-shell script line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("service")]),s._v(" postgresql restart\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h2",{attrs:{id:"配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#配置"}},[s._v("#")]),s._v(" 配置")]),s._v(" "),t("p",[s._v("默认情况下，"),t("code",[s._v("PostgreSQL")]),s._v(" 会创建一个拥有所权限的特殊用户 "),t("code",[s._v("postgres")]),s._v("。要实际使用 "),t("code",[s._v("PostgreSQL")]),s._v("，你必须先登录该账户")]),s._v(" "),t("div",{staticClass:"language-shell script line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("su")]),s._v(" postgres\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("你的提示符会更改为类似于以下的内容，使用 "),t("code",[s._v("psql")]),s._v(" 来启动 PostgreSQL Shell：")]),s._v(" "),t("div",{staticClass:"language-shell script line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("postgres@VM-0-5-ubuntu:~$ psql\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("你应该会看到如下提示符：")]),s._v(" "),t("div",{staticClass:"language-shell script line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("postgress")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("你可以输入 "),t("code",[s._v("\\q")]),s._v(" 以退出，输入"),t("code",[s._v("\\?")]),s._v(" 获取帮助。")]),s._v(" "),t("p",[s._v("要使用其他用户登录，使用 "),t("code",[s._v("\\q")]),s._v(" 命令退出，然后使用以下命令登录：")]),s._v(" "),t("div",{staticClass:"language-shell script line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("psql -U user_name\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("使用 "),t("code",[s._v("-d")]),s._v(" 参数直接连接数据库")]),s._v(" "),t("div",{staticClass:"language-shell script line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("psql -U user_name -d dbname\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h2",{attrs:{id:"数据库相关命令"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#数据库相关命令"}},[s._v("#")]),s._v(" 数据库相关命令")]),s._v(" "),t("p",[s._v("输入如下命令:")]),s._v(" "),t("div",{staticClass:"language-shell script line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("l\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 输出结果")]),s._v("\n                                 List of databases\n   Name    "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("  Owner   "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" Encoding "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("  Collate   "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("   Ctype    "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("   Access privileges   \n-----------+----------+----------+------------+------------+-----------------------\n postgres  "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" postgres "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" UTF8     "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" en_US.utf8 "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" en_US.utf8 "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" \n template0 "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" postgres "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" UTF8     "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" en_US.utf8 "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" en_US.utf8 "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("c/postgres          +\n           "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("          "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("          "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("            "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("            "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("postgres")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("CTc/postgres\n template1 "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" postgres "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" UTF8     "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" en_US.utf8 "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" en_US.utf8 "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("c/postgres          +\n           "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("          "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("          "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("            "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("            "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("postgres")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("CTc/postgres\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" rows"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br")])]),t("h3",{attrs:{id:"创建数据库"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#创建数据库"}},[s._v("#")]),s._v(" 创建数据库")]),s._v(" "),t("p",[s._v("使用 "),t("code",[s._v("CREATE DATABASE")]),s._v(" 命令来创建数据库")]),s._v(" "),t("div",{staticClass:"language-shell script line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("CREATE DATABASE dbname"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h2",{attrs:{id:"用户相关命令"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#用户相关命令"}},[s._v("#")]),s._v(" 用户相关命令")]),s._v(" "),t("p",[s._v("使用 "),t("code",[s._v("\\du")]),s._v(" 可查看用户列表")]),s._v(" "),t("div",{staticClass:"language-shell script line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("du\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 输出结果")]),s._v("\n                                   List of roles\n Role name "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("                         Attributes                         "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" Member of \n-----------+------------------------------------------------------------+-----------\n postgres  "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" Superuser, Create role, Create DB, Replication, Bypass RLS "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br")])]),t("h3",{attrs:{id:"创建用户"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#创建用户"}},[s._v("#")]),s._v(" 创建用户")]),s._v(" "),t("p",[s._v("使用 "),t("code",[s._v("CREATE USER user_name WITH PASSWORD 'user_password';")]),s._v(" 可创建用户和其密码，例如：我需要创建一个 "),t("code",[s._v("gitea")]),s._v(" 使用的账号，密码是 "),t("code",[s._v("gitea@psql")]),s._v("，则使用以下命令")]),s._v(" "),t("div",{staticClass:"language-shell script line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("CREATE "),t("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("USER")]),s._v(" gitea WITH PASSWORD "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'gitea@psql'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h3",{attrs:{id:"修改用户密码"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#修改用户密码"}},[s._v("#")]),s._v(" 修改用户密码")]),s._v(" "),t("div",{staticClass:"language-shell script line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("ALTER "),t("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("USER")]),s._v(" user_name WITH PASSWORD "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'my_password'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h3",{attrs:{id:"删除用户"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#删除用户"}},[s._v("#")]),s._v(" 删除用户")]),s._v(" "),t("div",{staticClass:"language-shell script line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("DROP "),t("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("USER")]),s._v(" user_name"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])])],1)}),[],!1,null,null,null);a.default=r.exports}}]);